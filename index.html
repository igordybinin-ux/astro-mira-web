<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tarot Mira</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;500&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: radial-gradient(circle at center, #1a0b2e 0%, #000000 100%);
            color: #e0e0e0;
            font-family: 'Montserrat', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        h2 { 
            font-family: 'Cinzel', serif;
            margin-bottom: 30px; 
            font-weight: 400; 
            color: #ffd700;
            text-transform: uppercase; 
            letter-spacing: 4px; 
            text-align: center; 
            font-size: 16px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        /* –°—Ü–µ–Ω–∞ –¥–ª—è 3D */
        .scene {
            perspective: 1000px;
            width: 240px; /* –ß—É—Ç—å —à–∏—Ä–µ */
            height: 400px; /* –ß—É—Ç—å –≤—ã—à–µ */
            position: relative;
        }

        /* –ö–∞—Ä—Ç–∞ */
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        /* –°—Ç–æ—Ä–æ–Ω—ã –∫–∞—Ä—Ç—ã */
        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            box-sizing: border-box;
            overflow: hidden;
        }

        /* --- –†–£–ë–ê–®–ö–ê (–ó–ê–î–ù–Ø–Ø –°–¢–û–†–û–ù–ê) --- */
        .card__face--front {
            background: #0f0518;
            border: 2px solid #5a4a2d;
        }
        
        /* –£–∑–æ—Ä —Ä—É–±–∞—à–∫–∏ (CSS Pattern) */
        .pattern {
            width: 90%;
            height: 94%;
            border: 1px solid #7a6a4d;
            background-image: 
                linear-gradient(30deg, #1a0b2e 12%, transparent 12.5%, transparent 87%, #1a0b2e 87.5%, #1a0b2e),
                linear-gradient(150deg, #1a0b2e 12%, transparent 12.5%, transparent 87%, #1a0b2e 87.5%, #1a0b2e),
                linear-gradient(30deg, #1a0b2e 12%, transparent 12.5%, transparent 87%, #1a0b2e 87.5%, #1a0b2e),
                linear-gradient(150deg, #1a0b2e 12%, transparent 12.5%, transparent 87%, #1a0b2e 87.5%, #1a0b2e),
                radial-gradient(circle at center, #ffd700 1%, transparent 2%);
            background-size: 20px 35px;
            background-position: 0 0, 0 0, 10px 18px, 10px 18px, 0 0;
            opacity: 0.3;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –ó–Ω–∞–∫ –≤ —Ü–µ–Ω—Ç—Ä–µ —Ä—É–±–∞—à–∫–∏ */
        .logo-symbol {
            width: 60px;
            height: 60px;
            border: 1px solid #ffd700;
            transform: rotate(45deg);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);
        }
        .logo-inner {
            width: 40px;
            height: 40px;
            border: 1px solid #ffd700;
        }

        /* --- –õ–ò–¶–û (–ü–ï–†–ï–î–ù–Ø–Ø –°–¢–û–†–û–ù–ê) --- */
        .card__face--back {
            background: #111;
            transform: rotateY(180deg);
            border: 4px solid #c5a059;
            padding: 20px;
        }

        /* –ò–º–∏—Ç–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∫–∞—Ä—Ç—ã (–ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞) */
        .card-image-placeholder {
            width: 100%;
            height: 60%;
            background: linear-gradient(to bottom, #1a0b2e, #000);
            border: 1px solid #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #ffd700;
            position: relative;
        }
        
        /* –ï—Å–ª–∏ –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ */
        .real-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none; /* –ü–æ–∫–∞ —Å–∫—Ä—ã—Ç–æ */
        }

        .card-name { 
            font-family: 'Cinzel', serif;
            font-weight: 700; 
            font-size: 18px; 
            color: #ffd700;
            text-transform: uppercase; 
            margin-bottom: 5px; 
            letter-spacing: 1px;
        }
        .card-desc { 
            font-family: 'Montserrat', sans-serif;
            font-size: 11px; 
            color: #aaa; 
            line-height: 1.4;
        }

        .btn {
            margin-top: 40px;
            padding: 16px 40px;
            background: linear-gradient(45deg, #c5a059, #ffd700);
            color: #000;
            border: none;
            border-radius: 2px;
            font-family: 'Cinzel', serif;
            font-weight: 700;
            font-size: 14px;
            letter-spacing: 1px;
            opacity: 0;
            transition: opacity 0.5s, transform 0.2s;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            text-transform: uppercase;
        }
        .btn.visible { opacity: 1; }
        .btn:active { transform: scale(0.95); }

    </style>
</head>
<body>

    <h2 id="status">–ö–æ—Å–Ω–∏—Ç–µ—Å—å –∫–∞—Ä—Ç—ã</h2>

    <div class="scene">
        <div class="card" onclick="flipCard()">
            <div class="card__face card__face--front">
                <div class="pattern">
                    <div class="logo-symbol">
                        <div class="logo-inner"></div>
                    </div>
                </div>
            </div>
            <div class="card__face card__face--back">
                <div class="card-image-placeholder" id="img_container">
                    <span id="c_icon">‚ú®</span>
                    </div>
                
                <div class="card-name" id="c_name">...</div>
                <div class="card-desc" id="c_desc">...</div>
            </div>
        </div>
    </div>

    <button class="btn" id="sendBtn" onclick="sendResult()">–ü—Ä–∏–Ω—è—Ç—å –°—É–¥—å–±—É</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); 

        // –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç
        const tarotDeck = [
            {name: "–®—É—Ç", icon: "üÉè", id: "fool", desc: "–ù–∞—á–∞–ª–æ –ø—É—Ç–∏, —Å–≤–æ–±–æ–¥–∞, —Ä–∏—Å–∫, –Ω–µ–≤–∏–Ω–Ω–æ—Å—Ç—å"},
            {name: "–ú–∞–≥", icon: "üîÆ", id: "magician", desc: "–í–æ–ª—è, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è"},
            {name: "–ñ—Ä–∏—Ü–∞", icon: "üåô", id: "priestess", desc: "–ò–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω—ã, –ø–æ–¥—Å–æ–∑–Ω–∞–Ω–∏–µ, –º—É–¥—Ä–æ—Å—Ç—å"},
            {name: "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞", icon: "üëë", id: "empress", desc: "–ò–∑–æ–±–∏–ª–∏–µ, –ø—Ä–∏—Ä–æ–¥–∞, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –º–∞—Ç—å"},
            {name: "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä", icon: "üõ°Ô∏è", id: "emperor", desc: "–í–ª–∞—Å—Ç—å, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∑–∞—â–∏—Ç–∞, –æ—Ç–µ—Ü"},
            {name: "–í–ª—é–±–ª–µ–Ω–Ω—ã–µ", icon: "‚ù§Ô∏è", id: "lovers", desc: "–õ—é–±–æ–≤—å, –≤—ã–±–æ—Ä, –≥–∞—Ä–º–æ–Ω–∏—è, —Å–æ—é–∑"},
            {name: "–ö–æ–ª–µ—Å–Ω–∏—Ü–∞", icon: "‚öîÔ∏è", id: "chariot", desc: "–î–≤–∏–∂–µ–Ω–∏–µ, –ø–æ–±–µ–¥–∞, –∫–æ–Ω—Ç—Ä–æ–ª—å, —Å–∏–ª–∞ –≤–æ–ª–∏"},
            {name: "–°–∏–ª–∞", icon: "ü¶Å", id: "strength", desc: "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞, —Å–º–µ–ª–æ—Å—Ç—å, —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ"},
            {name: "–û—Ç—à–µ–ª—å–Ω–∏–∫", icon: "üî¶", id: "hermit", desc: "–ü–æ–∏—Å–∫ –∏—Å—Ç–∏–Ω—ã, –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ, –º—É–¥—Ä–æ—Å—Ç—å"},
            {name: "–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã", icon: "üé°", id: "fortune", desc: "–°—É–¥—å–±–∞, –ø–µ—Ä–µ–º–µ–Ω—ã, —Ü–∏–∫–ª—ã –∂–∏–∑–Ω–∏"},
            {name: "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å", icon: "‚öñÔ∏è", id: "justice", desc: "–ü—Ä–∞–≤–¥–∞, –∑–∞–∫–æ–Ω, –ø—Ä–∏—á–∏–Ω–∞ –∏ —Å–ª–µ–¥—Å—Ç–≤–∏–µ"},
            {name: "–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π", icon: "üôÉ", id: "hanged", desc: "–ñ–µ—Ä—Ç–≤–∞, –Ω–æ–≤—ã–π –≤–∑–≥–ª—è–¥, –ø–∞—É–∑–∞"},
            {name: "–°–º–µ—Ä—Ç—å", icon: "üíÄ", id: "death", desc: "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ–Ω–µ—Ü —Å—Ç–∞—Ä–æ–≥–æ, –ø–µ—Ä–µ—Ö–æ–¥"},
            {name: "–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", icon: "üè∫", id: "temperance", desc: "–ë–∞–ª–∞–Ω—Å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ"},
            {name: "–î—å—è–≤–æ–ª", icon: "üî•", id: "devil", desc: "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –º–∞—Ç–µ—Ä–∏—è, —Ç–µ–Ω–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞"},
            {name: "–ë–∞—à–Ω—è", icon: "‚ö°", id: "tower", desc: "–†–∞–∑—Ä—É—à–µ–Ω–∏–µ, –∫—Ä–∞—Ö –∏–ª–ª—é–∑–∏–π, –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ"},
            {name: "–ó–≤–µ–∑–¥–∞", icon: "‚ú®", id: "star", desc: "–ù–∞–¥–µ–∂–¥–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å"},
            {name: "–õ—É–Ω–∞", icon: "üåö", id: "moon", desc: "–ò–ª–ª—é–∑–∏–∏, —Å—Ç—Ä–∞—Ö–∏, —Å–Ω—ã, –∏–Ω—Ç—É–∏—Ü–∏—è"},
            {name: "–°–æ–ª–Ω—Ü–µ", icon: "‚òÄÔ∏è", id: "sun", desc: "–†–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö, –≤–∏—Ç–∞–ª—å–Ω–æ—Å—Ç—å, —è—Å–Ω–æ—Å—Ç—å"},
            {name: "–°—É–¥", icon: "üìØ", id: "judgement", desc: "–í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ, –ø—Ä–∏–∑—ã–≤, –ø—Ä–æ—â–µ–Ω–∏–µ"},
            {name: "–ú–∏—Ä", icon: "üåç", id: "world", desc: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ"}
        ];

        let hasFlipped = false;
        let chosenCard = null;

        function flipCard() {